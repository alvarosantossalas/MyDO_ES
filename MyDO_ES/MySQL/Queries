CREATE DATABASE MyDO_Application DEFAULT CHARACTER SET utf8;
USE MyDO_Application;

CREATE TABLE tfg_user (
_id_user VARCHAR(255) NOT NULL UNIQUE PRIMARY KEY,
_admin INT(11) NOT NULL,
_username VARCHAR(255) NOT NULL UNIQUE,
_password VARCHAR(255) NOT NULL,
_name VARCHAR(255) NOT NULL,
_lastname VARCHAR(255) NOT NULL,
_email VARCHAR(255) NOT NULL,
_phone VARCHAR(255) NOT NULL)
CHARACTER SET=utf8;

CREATE TABLE tfg_login (
_id_user VARCHAR(255) NOT NULL PRIMARY KEY,
_date VARCHAR(255) NOT NULL,
CONSTRAINT fk_login_user FOREIGN KEY(_id_user) REFERENCES tfg_user(_id_user) ON DELETE CASCADE ON UPDATE CASCADE)
CHARACTER SET=utf8;

CREATE TABLE tfg_history (
_id_user VARCHAR(255) NOT NULL,
_date VARCHAR(255) NOT NULL)
CHARACTER SET=utf8;

CREATE TABLE tfg_team (
_id_team VARCHAR(255) NOT NULL UNIQUE PRIMARY KEY,
_name VARCHAR(255) NOT NULL,
_image VARCHAR(255))
CHARACTER SET=utf8;

CREATE TABLE tfg_members_team (
_id_members_team VARCHAR(255) NOT NULL PRIMARY KEY,
_id_team VARCHAR(255) NOT NULL,
_id_user VARCHAR(255) NOT NULL,
CONSTRAINT fk_members_team FOREIGN KEY (_id_team) REFERENCES tfg_team (_id_team) ON DELETE CASCADE ON UPDATE CASCADE,
CONSTRAINT fk_members_user FOREIGN KEY (_id_user) REFERENCES tfg_user (_id_user) ON DELETE CASCADE ON UPDATE CASCADE)
CHARACTER SET=utf8;

CREATE TABLE tfg_task (
_id_task VARCHAR(255) NOT NULL UNIQUE PRIMARY KEY,
_name VARCHAR(255) NOT NULL,
_subject VARCHAR (255) NOT NULL,
_description VARCHAR(255),
_type VARCHAR(255) NOT NULL,
_estimated_time INT(11) NOT NULL,
_finalized INT(11) NOT NULL,
_status VARCHAR(255) NOT NULL,
_id_team VARCHAR(255) NOT NULL,
CONSTRAINT fk_task_team FOREIGN KEY (_id_team) REFERENCES tfg_team (_id_team) ON DELETE CASCADE ON UPDATE CASCADE)
CHARACTER SET=utf8;

CREATE TABLE tfg_notify (
_id_notify VARCHAR(255) NOT NULL UNIQUE PRIMARY KEY,
_title VARCHAR(255) NOT NULL,
_message VARCHAR(255) NOT NULL,
_image VARCHAR(255))
CHARACTER SET=utf8;

CREATE TABLE tfg_project (
_id_project VARCHAR(255) NOT NULL UNIQUE PRIMARY KEY,
_name VARCHAR(255) NOT NULL,
_status INT(11) NOT NULL,
_subject VARCHAR(255) NOT NULL)
CHARACTER SET=utf8;

CREATE TABLE tfg_tasks_in_projects (
_id_tasks_in_projects VARCHAR(255) NOT NULL PRIMARY KEY,
_id_project VARCHAR(255) NOT NULL,
_id_task VARCHAR(255) NOT NULL,
_id_team VARCHAR(255) NOT NULL,
CONSTRAINT fk_taskInProjects_project FOREIGN KEY (_id_project) REFERENCES tfg_project(_id_project) ON DELETE CASCADE ON UPDATE CASCADE,
CONSTRAINT fk_taskInProjects_task FOREIGN KEY (_id_task) REFERENCES tfg_task(_id_task) ON DELETE CASCADE ON UPDATE CASCADE,
CONSTRAINT fk_taskInProjects_team FOREIGN KEY (_id_team) REFERENCES tfg_team(_id_team) ON DELETE CASCADE ON UPDATE CASCADE)
CHARACTER SET=utf8;

CREATE TABLE tfg_team_task (
_id_team_task VARCHAR(255) NOT NULL PRIMARY KEY,
_id_team VARCHAR(255) NOT NULL,
_id_task VARCHAR(255) NOT NULL,
CONSTRAINT fk_teamTask_team FOREIGN KEY (_id_team) REFERENCES tfg_team(_id_team) ON DELETE CASCADE ON UPDATE CASCADE,
CONSTRAINT fk_teamTask_task FOREIGN KEY (_id_task) REFERENCES tfg_task(_id_task) ON DELETE CASCADE ON UPDATE CASCADE)
CHARACTER SET=utf8;